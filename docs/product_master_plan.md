# 產品總規劃 Product Master Plan（U3）
更新日期：2026-02-15  
適用產品：拾憶 Recall（Flutter + Riverpod + Supabase + Hive）

## 0. 願景與定位
- 願景：打造「Quizlet 的好上手 + Anki 的記憶效率 + Duolingo 的行為驅動」學習產品。
- 目標族群：高中生、大學生、檢定考生；次要族群為老師與自學者。
- 核心價值：
  - 快速開始：3 分鐘內完成「匯入 -> 開始練習」。
  - 真正記住：FSRS + 錯題補強，提升長期記憶。
  - 不怕斷線：離線優先，弱網與校園網路可用。
  - 每天想回來：遊戲化、挑戰、徽章與小工具提醒。

## 1. 當前狀態（As-Is）
- 已完成主幹：
  - 基礎架構、三種學習模式、FSRS、統計儀表板。
  - Auth 強化（OAuth、Magic Link、生物辨識、路由守衛）。
  - Daily Challenge、Revenge Mode、Home Widgets（W1/W2）。
  - Admin 三階段（審核、批次、治理、合規匯出）。
- 待補缺口：
  - Supabase 正式環境鍵值與 Dashboard 設定。
  - 生產環境 RLS/同步全鏈路實測。
  - 成長飛輪與社群題庫尚未成形。
  - 趣味性已起步，但缺乏「長線任務系統」。

## 2. 產品北極星與 KPI
- 北極星：每週完成 >=1 次完整學習流程的活躍學習者（WAL）。
- 核心 KPI：
  - 啟動：D1 新手留存、首日完成首套學習比例。
  - 留存：D7、D30 留存。
  - 學習效率：每場次複習張數、錯題 7 日恢復率。
  - 黏著度：Daily Challenge 完成率、連續天數中位數。
  - 品質：Crash-free sessions、同步衝突率、P95 啟動/載入時間。
  - 商業：試用啟動率、試用轉付費率、30 日付費留存。

## 3. 使用者分群與 JTBD
- S1 考前衝刺生：想在短期記住大量題目。
  - JTBD：我只想知道今天該背什麼、先救最危險的。
- S2 長期累積生：每天固定少量練習，怕中斷。
  - JTBD：我想穩定連續，不要斷 streak。
- S3 教學協作者（老師/社團幹部）：
  - JTBD：我想快速出題、分享、追蹤大家是否完成。

## 4. 體驗主線（Core Loops）
- 主循環（Daily Loop）：
  - 入口提醒（Widget/通知）-> Today Review -> 評分 -> Summary -> 成就回饋 -> 明日計畫。
- 補強循環（Recovery Loop）：
  - 錯題聚合 -> Revenge Mode -> 連續清除 -> 錯題池縮小 -> 成效可視化。
- 成長循環（Growth Loop）：
  - 匯入/建立題庫 -> 分享/QR -> 新用戶導入 -> 題庫擴張 -> 活躍提升。

## 5. 趣味性與遊戲化設計（Fun System）
- 短期刺激（每次開啟有感）：
  - 立即回饋：答題動畫、分數浮動、完成慶祝。
  - 微任務：`3 分鐘快刷`、`錯題清零`、`今天先 5 張`。
- 中期動機（1-2 週）：
  - 任務鏈：7 天 challenge path（新手/回鍋/衝刺版）。
  - 成就徽章：行為型（連續）、技巧型（正確率）、探索型（新模式）。
  - 番茄鐘連動：完成番茄可拿額外進度加成。
- 長期黏著（1-3 月）：
  - 學習賽季（Season）：每月主題 + 限定徽章 + 排行榜（可匿名）。
  - 收藏系統：主題卡背、稱號、里程碑展示。
  - Buddy 模式：同學互相督促，不公開答案只公開進度。

## 6. 內容與社群策略
- UGC 題庫（P2）：
  - 公開/私密/連結分享三層可見性。
  - 題庫品質分數：完成率、收藏率、檢舉率、重複度。
- 內容冷啟動：
  - 官方精選題庫（學測、英文檢定、高頻單字）。
  - 模板庫：英文單字、歷史名詞、生物術語等一鍵起手。
- 社群健康：
  - 檢舉 + 管理審核流程。
  - 抄襲與垃圾內容偵測（相似度 + 行為規則）。

## 7. 商業化與方案分層
- Free（核心可用）：
  - FSRS、基本匯入、基本統計、Daily Challenge。
- Pro（高價值增益）：
  - 深度洞察（弱點地圖、預測達標率）。
  - AI 強化匯入清理、批次智能標籤。
  - 高階主題與 Widget 套件、更高容量上限。
- 定價建議：
  - 月費低門檻（學生可負擔）+ 年費折扣。
  - 7 天試用 + 復購與寬限機制。

## 8. 技術與治理原則
- 架構：
  - 垂直切片交付（UI/Provider/Service/Test/Analytics 同步完成）。
  - 離線優先、同步可追蹤、衝突可回溯。
- 安全：
  - RLS owner-only 為底線；Admin 行為全審計、append-only。
  - Edge Function 一律 fail-closed。
- 可觀測性：
  - 統一事件 taxonomy。
  - 同步/匯入/權限錯誤碼標準化。
- 品質門檻：
  - `flutter analyze` 無錯。
  - 關鍵路徑測試通過。
  - migration/schema/worker runbook 驗證通過。

## 9. 12 週執行藍圖（U3）
### Phase A（W1-W4）學習效率 + 趣味強化（P0）
- 必做：
  - Quiz 混題與錯題回放。
  - 任務鏈 V1（7 天）與徽章校正。
  - 匯入流程統一（CSV/OCR/Web）與錯誤提示一致。
- 驗收：
  - Daily Challenge 完成率提升。
  - 錯題恢復率提升。
  - 匯入成功率與留存提升。

### Phase B（W5-W8）個人化 + 多裝置穩定（P1）
- 必做：
  - 今日建議引擎（時間預估 + 模式分配）。
  - 欄位級衝突解決 UX。
  - 通知與 Widget 內容個人化。
- 驗收：
  - D7、D30 留存提升。
  - 同步衝突處理完成率提升。

### Phase C（W9-W12）成長 + 商業化 + 社群（P2）
- 必做：
  - 公開題庫探索與分享收藏。
  - Free/Pro entitlement 與付款流程。
  - 學習賽季 + 輕量排行榜。
- 驗收：
  - 分享導入率提升。
  - 試用與轉付費達標。

## 10. 實驗矩陣（A/B）
- E1：挑戰目標 10 vs 自適應目標（看完成率與次日回訪）。
- E2：提醒文案（溫和 vs 壓力）對啟動率影響。
- E3：Summary 頁「慶祝強度」對連續天數影響。
- E4：Revenge Mode 入口位置（首頁上方 vs 模式頁）對使用率影響。
- E5：試用入口時機（首次高峰成就 vs 設定頁）對轉付費影響。

## 11. 風險與對策
- 同步風險：多模式增加資料競爭。
  - 對策：事件序號、衝突 diff、可回滾合併。
- 趣味過載：遊戲化太重影響學習主線。
  - 對策：所有趣味功能可關閉；預設不干擾複習流程。
- 通知疲勞：
  - 對策：安靜時段、頻率上限、行為式自適應。
- 社群濫用：
  - 對策：風險分級審核、檢舉 SLA、黑名單與限制發布。

## 12. 每週運作節奏
- 週一：KPI 檢視與優先級重排。
- 週三：跨功能進度同步（產品/工程/設計）。
- 週五：Demo + 數據回顧 + 文件更新。
- 文件治理：
  - 本檔每週更新一次。
  - 重大範圍變動需同日更新。

## 13. 近期 2 週行動清單（可立即執行）
- 完成 Supabase 正式設定與 RLS smoke test。
- 針對 `sync_service` 補齊 CardProgress/ReviewLog 雲端同步。
- 任務鏈 V1（7 日）與成就獎勵文案上線。
- 補齊 deep link 冷啟動 + widget tap 全平台整合測試。

## 14. 文件關聯
- 舊版主計畫：`quizlet_app/docs/product_master_plan_2026-02-14.md`
- 路線圖：`quizlet_app/ROADMAP.md`
- 開發進度：`quizlet_app/todo.md`
- Widget 規格：`quizlet_app/docs/review_widgets_spec.md`
- Admin 計畫：`quizlet_app/docs/admin_account_management_plan.md`
- RLS 驗證：`quizlet_app/docs/rls_verification.md`
